<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.7.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Jason Hand">

  
  
  
    
  
  <meta name="description" content="Tech Used The brains behind this solution is an Azure Function (running Node.js) that is triggered via outgoing webhook (from Microsoft Teams). The function modifies an index.html file stored in a &ldquo;web server&rdquo; served from a serverless SMB file share in Azure Storage.
Users can open, update, and close &ldquo;status updates&rdquo; by invoking them from within a chat channel.
The text that follows the command will be stored and displayed on the site below the colored (Red or Green) header.">

  
  <link rel="alternate" hreflang="en-us" href="/post/building-a-serverless-status-page-solution/">

  


  
  
  
  <meta name="theme-color" content="#3f51b5">
  

  
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  
<script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-MCHLPWF');
</script>



  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu16bcbd491f2e99bfd4ff72c82967aff2_31445_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu16bcbd491f2e99bfd4ff72c82967aff2_31445_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="/post/building-a-serverless-status-page-solution/">

  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="twitter:site" content="@jasonhand">
  <meta property="twitter:creator" content="@jasonhand">
  
  <meta property="og:site_name" content="On Call Life">
  <meta property="og:url" content="/post/building-a-serverless-status-page-solution/">
  <meta property="og:title" content="Building a Serverless Status Page Solution | On Call Life">
  <meta property="og:description" content="Tech Used The brains behind this solution is an Azure Function (running Node.js) that is triggered via outgoing webhook (from Microsoft Teams). The function modifies an index.html file stored in a &ldquo;web server&rdquo; served from a serverless SMB file share in Azure Storage.
Users can open, update, and close &ldquo;status updates&rdquo; by invoking them from within a chat channel.
The text that follows the command will be stored and displayed on the site below the colored (Red or Green) header."><meta property="og:image" content="img/map[gravatar:%!s(bool=false) shape:circle]">
  <meta property="twitter:image" content="img/map[gravatar:%!s(bool=false) shape:circle]"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2020-03-05T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2020-03-05T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/building-a-serverless-status-page-solution/"
  },
  "headline": "Building a Serverless Status Page Solution",
  
  "datePublished": "2020-03-05T00:00:00Z",
  "dateModified": "2020-03-05T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Jason Hand"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "On Call Life",
    "logo": {
      "@type": "ImageObject",
      "url": "/images/icon_hu16bcbd491f2e99bfd4ff72c82967aff2_31445_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "Tech Used The brains behind this solution is an Azure Function (running Node.js) that is triggered via outgoing webhook (from Microsoft Teams). The function modifies an index.html file stored in a \u0026ldquo;web server\u0026rdquo; served from a serverless SMB file share in Azure Storage.\nUsers can open, update, and close \u0026ldquo;status updates\u0026rdquo; by invoking them from within a chat channel.\nThe text that follows the command will be stored and displayed on the site below the colored (Red or Green) header."
}
</script>

  

  


  


  





  <title>Building a Serverless Status Page Solution | On Call Life</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">On Call Life</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">On Call Life</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/"><span>Home</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Articles</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#projects"><span>Sections</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      <li class="nav-item">
        <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
      </li>
      

      

    </ul>

  </div>
</nav>


  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Building a Serverless Status Page Solution</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    Mar 5, 2020
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    3 min read
  </span>
  

  
  
  

  
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      <p>
<a href="https://jhandcdn.blob.core.windows.net/blob/UpdateFromTeams.gif" target="_blank" rel="noopener"><img src="https://jhandcdn.blob.core.windows.net/blob/UpdateFromTeams.gif" alt=""></a></p>
<h3 id="tech-used">Tech Used</h3>
<p>The brains behind this solution is an Azure Function (running Node.js) that is triggered via outgoing webhook (from Microsoft Teams). The function modifies an index.html file stored in a &ldquo;web server&rdquo; served from a serverless SMB file share in Azure Storage.</p>
<p>Users can <code>open</code>, <code>update</code>, and <code>close</code> &ldquo;status updates&rdquo; by invoking them from within a chat channel.</p>
<p>The text that follows the command will be stored and displayed on the site below the colored (Red or Green) header.</p>
<p>In addition to the website files, an Azure Table will be used for storing the history of each status update.</p>
<blockquote>
<p><strong>NOTE:</strong> The table is not provisioned with the deployment script. It needs to be manually created in Step 2 below.</p>
</blockquote>
<p>SignalR manages refreshing the client so that changes made to the HTML are immediately visible without any end user interaction.</p>
<p>Application Insights is used to provide observability on the operation, behavior, and usage of the solution and is &ldquo;best practice&rdquo; for building highly available and reliable system&hellip; which we expect from any Status Page solution.</p>
<h3 id="prerequisites">Prerequisites</h3>
<p>You will need an account with the following services:</p>
<ul>
<li>
<a href="https://cda.ms/16X" target="_blank" rel="noopener">Microsoft Azure</a></li>
<li>
<a href="https://cda.ms/17f" target="_blank" rel="noopener">Microsoft Teams</a></li>
</ul>
<hr>
<h3 id="deployment-instructions">Deployment Instructions</h3>
<p>The blue button below will deploy all resources needed for this solution in to the Resource Group and Azure region of your choice. The name you choose also determines the URL used to view the Status Page as well as the incoming URL used to trigger updates.</p>
<h4 id="steps-to-deploy">Steps To Deploy</h4>
<p><strong>1.</strong> Create the Azure Function app, Storage account, and SignalR Service with this button: 
<a href="https://azuredeploy.net/" target="_blank" rel="noopener"><img src="https://azuredeploy.net/deploybutton.png" alt="Deploy to Azure"></a></p>
<blockquote>
<p>This will begin deploying everything needed for the solution and will provide a link to the public facing URL of the Status Page as well as a link to your new resource group where you will continue with step 2.</p>
</blockquote>
<hr>
<p><strong>2.</strong> In the Azure portal, open the Storage account and add a table named <code>statuses</code>. You do not need to set any properties or add records.</p>
<p><img src="https://jhandcdn.blob.core.windows.net/blob/CreateStatusesTable.gif" alt="Create table"></p>
<hr>
<p><strong>3.</strong> Navigate to the function app, and open the <code>teams-webhook</code> function. Click &ldquo;Get Function URL&rdquo; and copy the URL.</p>
<p><strong>4.</strong> Open the URL of the Function in a new tab. This is &ldquo;Status Page&rdquo; that will change automatically when updated. It is NOT the same as the &ldquo;Get Function URL&rdquo; used in the next step.</p>
<p><img src="https://jhandcdn.blob.core.windows.net/blob/ReindeerGuidanceSystemURL.png" alt=""></p>
<hr>
<p><strong>5.</strong> Open Microsoft Teams and navigate to the &ldquo;Apps&rdquo; page of the team in which you want to create the bot. Click &ldquo;Create outgoing webhook&rdquo;.</p>
<ul>
<li>Use <code>StatusPage</code> as the bot name (this is hardcoded, for now).</li>
<li>Paste in the function URL, and enter a description and press the create button.</li>
</ul>
<blockquote>
<p>You will be prompted with a secret code for validating webhook calls from Teams. We currently do not use this. Close the dialog box.</p>
</blockquote>
<p>
<a href="https://jhandcdn.blob.core.windows.net/blob/Webhook.gif" target="_blank" rel="noopener"><img src="https://jhandcdn.blob.core.windows.net/blob/WebhookStatic.png" alt=""></a></p>
<p><strong>6.</strong> In Microsoft Teams, update the status page by typing <code>@StatusPage</code> to summon the bot followed by <code>open We are experiencing a problem. Standby for more information</code></p>
<p>Available commands are:</p>
<pre><code class="language-bot">        @StatusPage open [message]
        @StatusPage update [message]
        @StatusPage close [message]
        @StatusPage help`
</code></pre>
<hr>
<p>This solution is based on the on-stage demonstrations built for Microsoft Ignite The Tour.</p>
<p>To learn more about the full demonstration, view the repo for &ldquo;
<a href="https://myignite.techcommunity.microsoft.com/sessions/82997/?WT.mc_id=oncalllife-blog-jahand" target="_blank" rel="noopener">OPS20 - Responding To Incidents</a>&quot;. Huge Thanks to 
<a href="https://github.com/anthonychu" target="_blank" rel="noopener">Anthony Chu</a> in bringing this to life.</p>
<p>Now, let&rsquo;s move on to

<a href="/post/understanding-why-we-learn-from-incidents/">Understanding Why We Learn From Incidents</a>.</p>

    </div>

    





  
  

<p class="edit-page">
  <a href="https://github.com/jasonhand/academic-kickstart/edit/master/content/post/building-a-serverless-status-page-solution/index.md">
    <i class="fas fa-pen pr-2"></i>Edit this page
  </a>
</p>





<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/chatops/">chatops</a>
  
  <a class="badge badge-light" href="/tags/devops/">devops</a>
  
  <a class="badge badge-light" href="/tags/communication/">communication</a>
  
  <a class="badge badge-light" href="/tags/collaboration/">collaboration</a>
  
  <a class="badge badge-light" href="/tags/stakeholders/">stakeholders</a>
  
  <a class="badge badge-light" href="/tags/serverless/">serverless</a>
  
  <a class="badge badge-light" href="/tags/status/">status</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/post/building-a-serverless-status-page-solution/&amp;text=Building%20a%20Serverless%20Status%20Page%20Solution" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/post/building-a-serverless-status-page-solution/&amp;t=Building%20a%20Serverless%20Status%20Page%20Solution" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/post/building-a-serverless-status-page-solution/&amp;title=Building%20a%20Serverless%20Status%20Page%20Solution" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=Building%20a%20Serverless%20Status%20Page%20Solution%20/post/building-a-serverless-status-page-solution/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
  </ul>
</div>













  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/post/managing-tasks-from-group-chat-chatops/">Managing Tasks from Group Chat - ChatOps</a></li>
      
      <li><a href="/post/updating-stakeholders/">Updating Stakeholders</a></li>
      
      <li><a href="/post/identifying-the-communication-coordinator/">Identifying the Communication Coordinator</a></li>
      
      <li><a href="/post/understanding-why-we-learn-from-incidents/">Understanding Why We Learn From Incidents</a></li>
      
      <li><a href="/post/establishing-communications-channel/">Establishing Communication Channels</a></li>
      
    </ul>
  </div>
  



  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js" integrity="sha256-1zu+3BnLYV9LdiY85uXMzii3bdrkelyp37e0ZyTAQh0=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.a8d7005002cb4a052fd6d721e83df9ba.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
